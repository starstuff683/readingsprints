<!DOCTYPE html>
<html lang= ‚Äúen‚Äù>
<head>
<meta charset= ‚ÄúUTF-8‚Äù>
<title>Reading Sprint</title>
<script src=https://cdn.tailwindcss.com></script>
</head>
<body class=‚Äùbg-gray-100‚Äù>
        <div class="mb-6 text-center">‚Ä®
            <div class="timer-display text-gray-800 mb-2" id="timer">00:25:00</div>‚Ä®
            <div class="w-full bg-gray-200 rounded-full h-2.5 mb-4">‚Ä®
                <div class="progress-bar h-2.5 rounded-full" id="progress-bar" style="width: 0%; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);"></div>‚Ä®
            </div>‚Ä®
            ‚Ä®
            <!-- Timer Adjustment Controls - Will be hidden when timer is running -->‚Ä®
            <div class="timer-controls mb-4" id="timer-controls">‚Ä®
                <div class="flex justify-center items-center space-x-2">‚Ä®
                    <div class="flex flex-col items-center">‚Ä®
                        <label class="text-xs text-gray-500">Hours</label>‚Ä®
                        <div class="flex items-center">‚Ä®
                            <button class="timer-btn px-2 py-1 bg-gray-100 rounded-l-lg" data-action="decrease" data-unit="hours">-</button>‚Ä®
                            <input type="number" id="hours-input" class="timer-input h-8 border-y border-gray-200 focus:outline-none" min="0" max="24" value="0">‚Ä®
                            <button class="timer-btn px-2 py-1 bg-gray-100 rounded-r-lg" data-action="increase" data-unit="hours">+</button>‚Ä®
                        </div>‚Ä®
                    </div>‚Ä®
                    <div class="flex flex-col items-center">‚Ä®
                        <label class="text-xs text-gray-500">Minutes</label>‚Ä®
                        <div class="flex items-center">‚Ä®
                            <button class="timer-btn px-2 py-1 bg-gray-100 rounded-l-lg" data-action="decrease" data-unit="minutes">-</button>‚Ä®
                            <input type="number" id="minutes-input" class="timer-input h-8 border-y border-gray-200 focus:outline-none" min="0" max="59" value="25">‚Ä®
                            <button class="timer-btn px-2 py-1 bg-gray-100 rounded-r-lg" data-action="increase" data-unit="minutes">+</button>‚Ä®
                        </div>‚Ä®
                    </div>‚Ä®
                    <div class="flex flex-col items-center">‚Ä®
                        <label class="text-xs text-gray-500">Seconds</label>‚Ä®
                        <div class="flex items-center">‚Ä®
                            <button class="timer-btn px-2 py-1 bg-gray-100 rounded-l-lg" data-action="decrease" data-unit="seconds">-</button>‚Ä®
                            <input type="number" id="seconds-input" class="timer-input h-8 border-y border-gray-200 focus:outline-none" min="0" max="59" value="0">‚Ä®
                            <button class="timer-btn px-2 py-1 bg-gray-100 rounded-r-lg" data-action="increase" data-unit="seconds">+</button>‚Ä®
                        </div>‚Ä®
                    </div>‚Ä®
                </div>‚Ä®
            </div>‚Ä®
            ‚Ä®
            <div class="flex justify-center space-x-4">‚Ä®
                <button id="start-btn" class="btn-primary text-white px-6 py-2 rounded-full font-medium">Start</button>‚Ä®
                <button id="pause-btn" class="btn-secondary text-gray-700 px-6 py-2 rounded-full font-medium hidden">Pause</button>‚Ä®
                <button id="reset-btn" class="bg-gray-200 text-gray-700 px-6 py-2 rounded-full font-medium">Reset</button>‚Ä®
            </div>‚Ä®
        </div>‚Ä®
        ‚Ä®
        <div class="border-t border-gray-200 pt-6">‚Ä®
            <div class="flex justify-between items-center mb-4">‚Ä®
                <h2 class="text-lg font-semibold text-gray-800 flex items-center">‚Ä®
                    <span class="mr-2">üåø</span> Today's Reading‚Ä®
                </h2>‚Ä®
                <div class="flex items-center">‚Ä®
                    <svg class="book-icon w-5 h-5 text-blue-600 mr-1" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg">‚Ä®
                        <path d="M9 4.804A7.968 7.968 0 005.5 4c-1.255 0-2.443.29-3.5.804v10A7.969 7.969 0 015.5 14c1.669 0 3.218.51 4.5 1.385A7.962 7.962 0 0114.5 14c1.255 0 2.443.29 3.5.804v-10A7.968 7.968 0 0014.5 4c-1.255 0-2.443.29-3.5.804V12a1 1 0 11-2 0V4.804z"></path>‚Ä®
                    </svg>‚Ä®
                    <span id="total-pages" class="font-semibold">0</span>‚Ä®
                    <span class="text-gray-600 ml-1">pages</span>‚Ä®
                </div>‚Ä®
            </div>‚Ä®
            ‚Ä®
            <div class="flex items-center space-x-3 mb-6">‚Ä®
                <div class="flex-1">‚Ä®
                    <label for="page-input" class="block text-sm font-medium text-gray-700 mb-1">Pages read:</label>‚Ä®
                    <input type="number" id="page-input" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500" placeholder="Enter pages">‚Ä®
                </div>‚Ä®
                <button id="add-pages-btn" class="btn-primary text-white px-4 py-2 rounded-lg font-medium mt-5">Add</button>‚Ä®
            </div>‚Ä®
            ‚Ä®
            <div class="bg-blue-50 rounded-lg p-4">‚Ä®
                <h3 class="font-medium text-blue-800 mb-2 flex items-center">‚Ä®
                    <span class="mr-2">ü¶ã</span> Reading Sessions‚Ä®
                </h3>‚Ä®
                <div id="sessions-list" class="space-y-2 max-h-40 overflow-y-auto">‚Ä®
                    <!-- Sessions will be added here -->‚Ä®
                    <div class="text-gray-500 text-sm italic">No sessions yet. Start reading!</div>‚Ä®
                </div>‚Ä®
            </div>‚Ä®
        </div>‚Ä®
    </div>‚Ä®
    ‚Ä®
    <div class="card rounded-xl p-6 bg-white/80" id="stats-card">‚Ä®
        <div class="flex justify-between items-center mb-4">‚Ä®
            <h2 class="text-lg font-semibold text-gray-800 flex items-center">‚Ä®
                <span class="mr-2">üå∑</span> Reading Stats‚Ä®
            </h2>‚Ä®
            ‚Ä®
            <!-- Theme Selector -->‚Ä®
            <div class="flex space-x-2">‚Ä®
                <div class="theme-selector active" data-theme="spring" style="background: linear-gradient(135deg, #a8e063 0%, #56ab2f 100%);"></div>‚Ä®
                <div class="theme-selector" data-theme="lavender" style="background: linear-gradient(135deg, #e0c3fc 0%, #8ec5fc 100%);"></div>‚Ä®
                <div class="theme-selector" data-theme="sunset" style="background: linear-gradient(135deg, #ff9a9e 0%, #fad0c4 100%);"></div>‚Ä®
                <div class="theme-selector" data-theme="ocean" style="background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);"></div>‚Ä®
            </div>‚Ä®
        </div>‚Ä®
        ‚Ä®
        <div class="grid grid-cols-2 gap-4">‚Ä®
            <div class="bg-green-50 rounded-lg p-3 text-center">‚Ä®
                <div class="text-green-800 text-sm mb-1">Total Time</div>‚Ä®
                <div id="total-time" class="font-semibold text-lg">0 min</div>‚Ä®
            </div>‚Ä®
            <div class="bg-blue-50 rounded-lg p-3 text-center">‚Ä®
                <div class="text-blue-800 text-sm mb-1">Longest Streak</div>‚Ä®
                <div id="longest-streak" class="font-semibold text-lg">0 days</div>‚Ä®
            </div>‚Ä®
            <div class="bg-indigo-50 rounded-lg p-3 text-center">‚Ä®
                <div class="text-indigo-800 text-sm mb-1">Sessions</div>‚Ä®
                <div id="total-sessions" class="font-semibold text-lg">0</div>‚Ä®
            </div>‚Ä®
            <div class="bg-pink-50 rounded-lg p-3 text-center">‚Ä®
                <div class="text-pink-800 text-sm mb-1">Avg. Pages/Session</div>‚Ä®
                <div id="avg-pages" class="font-semibold text-lg">0</div>‚Ä®
            </div>‚Ä®
        </div>‚Ä®
        ‚Ä®
        <!-- Quick Timer Presets -->‚Ä®
        <div class="mt-4">‚Ä®
            <h3 class="text-sm font-medium text-gray-700 mb-2 flex items-center">‚Ä®
                <span class="mr-2">‚è±Ô∏è</span> Quick Timer Presets‚Ä®
            </h3>‚Ä®
            <div class="flex flex-wrap gap-2">‚Ä®
                <button class="timer-preset px-3 py-1 text-sm rounded-full bg-green-100 text-green-800" data-hours="0" data-minutes="15" data-seconds="0">15 min</button>‚Ä®
                <button class="timer-preset px-3 py-1 text-sm rounded-full bg-green-100 text-green-800" data-hours="0" data-minutes="25" data-seconds="0">25 min</button>‚Ä®
                <button class="timer-preset px-3 py-1 text-sm rounded-full bg-green-100 text-green-800" data-hours="0" data-minutes="45" data-seconds="0">45 min</button>‚Ä®
                <button class="timer-preset px-3 py-1 text-sm rounded-full bg-green-100 text-green-800" data-hours="1" data-minutes="0" data-seconds="0">1 hour</button>‚Ä®
            </div>‚Ä®
        </div>‚Ä®
        ‚Ä®
        <!-- Reset Stats Button -->‚Ä®
        <div class="mt-6 text-center">‚Ä®
            <button id="reset-stats-btn" class="px-4 py-2 bg-red-100 text-red-700 rounded-lg text-sm font-medium hover:bg-red-200 transition-colors">‚Ä®
                Reset All Reading Stats‚Ä®
            </button>‚Ä®
        </div>‚Ä®
    </div>‚Ä®
</div>‚Ä®
‚Ä®
<!-- Page Tracking Modal -->‚Ä®
<div id="page-tracking-modal" class="modal-overlay">‚Ä®
    <div class="modal-content bg-white rounded-xl p-6 max-w-sm mx-4">‚Ä®
        <h3 class="text-xl font-semibold text-gray-800 mb-4">Reading Sprint Complete!</h3>‚Ä®
        <p class="text-gray-600 mb-6">Great job! Let's track your progress. What page are you on now?</p>‚Ä®
        ‚Ä®
        <div class="mb-6">‚Ä®
            <div class="flex items-center justify-between mb-2">‚Ä®
                <label for="last-page" class="text-sm font-medium text-gray-700">Previous page:</label>‚Ä®
                <span id="last-page-display" class="font-semibold">0</span>‚Ä®
            </div>‚Ä®
            <div class="flex items-center space-x-3">‚Ä®
                <div class="flex-1">‚Ä®
                    <label for="current-page" class="block text-sm font-medium text-gray-700 mb-1">Current page:</label>‚Ä®
                    <input type="number" id="current-page" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500" placeholder="Enter current page">‚Ä®
                </div>‚Ä®
            </div>‚Ä®
        </div>‚Ä®
        ‚Ä®
        <div class="flex justify-between">‚Ä®
            <button id="skip-tracking-btn" class="px-4 py-2 bg-gray-200 text-gray-700 rounded-lg font-medium">Skip</button>‚Ä®
            <button id="save-pages-btn" class="btn-primary text-white px-6 py-2 rounded-lg font-medium">Save Progress</button>‚Ä®
        </div>‚Ä®
    </div>‚Ä®
</div>‚Ä®
‚Ä®
<!-- Reset Confirmation Modal -->‚Ä®
<div id="reset-confirm-modal" class="modal-overlay">‚Ä®
    <div class="modal-content bg-white rounded-xl p-6 max-w-sm mx-4">‚Ä®
        <h3 class="text-xl font-semibold text-gray-800 mb-4">Reset All Stats?</h3>‚Ä®
        <p class="text-gray-600 mb-6">This will delete all your reading sessions, streaks, and page counts. This action cannot be undone.</p>‚Ä®
        ‚Ä®
        <div class="flex justify-between">‚Ä®
            <button id="cancel-reset-btn" class="px-4 py-2 bg-gray-200 text-gray-700 rounded-lg font-medium">Cancel</button>‚Ä®
            <button id="confirm-reset-btn" class="px-6 py-2 bg-red-500 text-white rounded-lg font-medium">Reset Everything</button>‚Ä®
        </div>‚Ä®
    </div>‚Ä®
</div>‚Ä®
‚Ä®
<script>‚Ä®
    document.addEventListener('DOMContentLoaded', function() {‚Ä®
        // Theme settings‚Ä®
        const themes = {‚Ä®
            spring: {‚Ä®
                background: 'linear-gradient(135deg, #f5ffe5 0%, #e0f5c8 100%)',‚Ä®
                primaryButton: 'linear-gradient(135deg, #a8e063 0%, #56ab2f 100%)',‚Ä®
                secondaryButton: 'linear-gradient(135deg, #c1e97e 0%, #8fd46a 100%)',‚Ä®
                progressBar: 'linear-gradient(135deg, #a8e063 0%, #56ab2f 100%)',‚Ä®
                cardBg: 'rgba(255, 255, 255, 0.8)',‚Ä®
                emoji: 'üå∏'‚Ä®
            },‚Ä®
            lavender: {‚Ä®
                background: 'linear-gradient(135deg, #f3e7ff 0%, #e4d0ff 100%)',‚Ä®
                primaryButton: 'linear-gradient(135deg, #e0c3fc 0%, #8ec5fc 100%)',‚Ä®
                secondaryButton: 'linear-gradient(135deg, #d8c9ff 0%, #b5c6ff 100%)',‚Ä®
                progressBar: 'linear-gradient(135deg, #e0c3fc 0%, #8ec5fc 100%)',‚Ä®
                cardBg: 'rgba(255, 255, 255, 0.8)',‚Ä®
                emoji: 'üîÆ'‚Ä®
            },‚Ä®
            sunset: {‚Ä®
                background: 'linear-gradient(135deg, #fff5f5 0%, #ffe8e0 100%)',‚Ä®
                primaryButton: 'linear-gradient(135deg, #ff9a9e 0%, #fad0c4 100%)',‚Ä®
                secondaryButton: 'linear-gradient(135deg, #ffb8bb 0%, #ffdcd7 100%)',‚Ä®
                progressBar: 'linear-gradient(135deg, #ff9a9e 0%, #fad0c4 100%)',‚Ä®
                cardBg: 'rgba(255, 255, 255, 0.8)',‚Ä®
                emoji: 'üåÖ'‚Ä®
            },‚Ä®
            ocean: {‚Ä®
                background: 'linear-gradient(135deg, #e3f5ff 0%, #d0f0ff 100%)',‚Ä®
                primaryButton: 'linear-gradient(135deg, #4facfe 0%, #00f2fe 100%)',‚Ä®
                secondaryButton: 'linear-gradient(135deg, #7cc2ff 0%, #4df8ff 100%)',‚Ä®
                progressBar: 'linear-gradient(135deg, #4facfe 0%, #00f2fe 100%)',‚Ä®
                cardBg: 'rgba(255, 255, 255, 0.8)',‚Ä®
                emoji: 'üåä'‚Ä®
            }‚Ä®
        };‚Ä®
        ‚Ä®
        let currentTheme = 'spring';‚Ä®
        ‚Ä®
        // Initialize from localStorage‚Ä®
        let timerDuration = 25 * 60; // 25 minutes in seconds‚Ä®
        let timeRemaining = timerDuration;‚Ä®
        let timerInterval = null;‚Ä®
        let isRunning = false;‚Ä®
        let sessions = JSON.parse(localStorage.getItem('readingSessions')) || [];‚Ä®
        let streak = JSON.parse(localStorage.getItem('readingStreak')) || {‚Ä®
            current: 0,‚Ä®
            longest: 0,‚Ä®
            lastDate: null‚Ä®
        };‚Ä®
        let totalPages = JSON.parse(localStorage.getItem('totalPages')) || 0;‚Ä®
        let lastPageNumber = JSON.parse(localStorage.getItem('lastPageNumber')) || 0;‚Ä®
        ‚Ä®
        // DOM elements‚Ä®
        const timerDisplay = document.getElementById('timer');‚Ä®
        const progressBar = document.getElementById('progress-bar');‚Ä®
        const startBtn = document.getElementById('start-btn');‚Ä®
        const pauseBtn = document.getElementById('pause-btn');‚Ä®
        const resetBtn = document.getElementById('reset-btn');‚Ä®
        const pageInput = document.getElementById('page-input');‚Ä®
        const addPagesBtn = document.getElementById('add-pages-btn');‚Ä®
        const sessionsList = document.getElementById('sessions-list');‚Ä®
        const streakCount = document.getElementById('streak-count');‚Ä®
        const totalPagesDisplay = document.getElementById('total-pages');‚Ä®
        const totalTimeDisplay = document.getElementById('total-time');‚Ä®
        const longestStreakDisplay = document.getElementById('longest-streak');‚Ä®
        const totalSessionsDisplay = document.getElementById('total-sessions');‚Ä®
        const avgPagesDisplay = document.getElementById('avg-pages');‚Ä®
        const hoursInput = document.getElementById('hours-input');‚Ä®
        const minutesInput = document.getElementById('minutes-input');‚Ä®
        const secondsInput = document.getElementById('seconds-input');‚Ä®
        const themeSelectors = document.querySelectorAll('.theme-selector');‚Ä®
        const timerPresets = document.querySelectorAll('.timer-preset');‚Ä®
        const timerButtons = document.querySelectorAll('.timer-btn');‚Ä®
        const resetStatsBtn = document.getElementById('reset-stats-btn');‚Ä®
        const timerControls = document.getElementById('timer-controls');‚Ä®
        ‚Ä®
        // Modal elements‚Ä®
        const pageTrackingModal = document.getElementById('page-tracking-modal');‚Ä®
        const lastPageDisplay = document.getElementById('last-page-display');‚Ä®
        const currentPageInput = document.getElementById('current-page');‚Ä®
        const savePagesBtn = document.getElementById('save-pages-btn');‚Ä®
        const skipTrackingBtn = document.getElementById('skip-tracking-btn');‚Ä®
        const resetConfirmModal = document.getElementById('reset-confirm-modal');‚Ä®
        const cancelResetBtn = document.getElementById('cancel-reset-btn');‚Ä®
        const confirmResetBtn = document.getElementById('confirm-reset-btn');‚Ä®
        ‚Ä®
        // Apply saved theme if exists‚Ä®
        const savedTheme = localStorage.getItem('readingTheme');‚Ä®
        if (savedTheme && themes[savedTheme]) {‚Ä®
            currentTheme = savedTheme;‚Ä®
            applyTheme(currentTheme);‚Ä®
            ‚Ä®
            // Update active theme selector‚Ä®
            themeSelectors.forEach(selector => {‚Ä®
                if (selector.dataset.theme === currentTheme) {‚Ä®
                    selector.classList.add('active');‚Ä®
                } else {‚Ä®
                    selector.classList.remove('active');‚Ä®
                }‚Ä®
            });‚Ä®
        } else {‚Ä®
            applyTheme('spring');‚Ä®
        }‚Ä®
        ‚Ä®
        // Update displays‚Ä®
        updateDisplays();‚Ä®
        renderSessions();‚Ä®
        checkStreak();‚Ä®
        ‚Ä®
        // Set initial timer values‚Ä®
        updateTimerInputs();‚Ä®
        ‚Ä®
        // Timer functions‚Ä®
        function updateTimer() {‚Ä®
            const hours = Math.floor(timeRemaining / 3600);‚Ä®
            const minutes = Math.floor((timeRemaining % 3600) / 60);‚Ä®
            const seconds = timeRemaining % 60;‚Ä®
            ‚Ä®
            timerDisplay.textContent = `${hours.toString().padStart(2, '0')}:${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;‚Ä®
            ‚Ä®
            // Update progress bar‚Ä®
            const progress = ((timerDuration - timeRemaining) / timerDuration) * 100;‚Ä®
            progressBar.style.width = `${progress}%`;‚Ä®
            ‚Ä®
            if (timeRemaining <= 0) {‚Ä®
                clearInterval(timerInterval);‚Ä®
                isRunning = false;‚Ä®
                timeRemaining = 0;‚Ä®
                timerComplete();‚Ä®
                updateButtonState();‚Ä®
                showTimerControls(); // Show controls when timer completes‚Ä®
            }‚Ä®
        }‚Ä®
        ‚Ä®
        function startTimer() {‚Ä®
            if (!isRunning) {‚Ä®
                // If timer is at 0, get values from inputs‚Ä®
                if (timeRemaining === 0) {‚Ä®
                    updateTimerDuration();‚Ä®
                    timeRemaining = timerDuration;‚Ä®
                }‚Ä®
                ‚Ä®
                // Don't start if duration is 0‚Ä®
                if (timerDuration === 0) {‚Ä®
                    showNotification('Timer Error', 'Please set a timer duration greater than 0.');‚Ä®
                    return;‚Ä®
                }‚Ä®
                ‚Ä®
                isRunning = true;‚Ä®
                timerInterval = setInterval(() => {‚Ä®
                    timeRemaining--;‚Ä®
                    updateTimer();‚Ä®
                }, 1000);‚Ä®
                updateButtonState();‚Ä®
                hideTimerControls(); // Hide controls when timer starts‚Ä®
            }‚Ä®
        }‚Ä®
        ‚Ä®
        function pauseTimer() {‚Ä®
            if (isRunning) {‚Ä®
                isRunning = false;‚Ä®
                clearInterval(timerInterval);‚Ä®
                updateButtonState();‚Ä®
                // Don't show controls on pause - only on reset‚Ä®
            }‚Ä®
        }‚Ä®
        ‚Ä®
        function resetTimer() {‚Ä®
            pauseTimer();‚Ä®
            updateTimerDuration();‚Ä®
            timeRemaining = timerDuration;‚Ä®
            updateTimer();‚Ä®
            updateTimerInputs();‚Ä®
            updateButtonState();‚Ä®
            showTimerControls(); // Show controls when timer is reset‚Ä®
        }‚Ä®
        ‚Ä®
        function hideTimerControls() {‚Ä®
            timerControls.classList.add('hidden');‚Ä®
        }‚Ä®
        ‚Ä®
        function showTimerControls() {‚Ä®
            timerControls.classList.remove('hidden');‚Ä®
        }‚Ä®
        ‚Ä®
        function updateTimerDuration() {‚Ä®
            const hours = parseInt(hoursInput.value) || 0;‚Ä®
            const minutes = parseInt(minutesInput.value) || 0;‚Ä®
            const seconds = parseInt(secondsInput.value) || 0;‚Ä®
            ‚Ä®
            // Validate inputs‚Ä®
            const validHours = Math.min(Math.max(hours, 0), 24);‚Ä®
            const validMinutes = Math.min(Math.max(minutes, 0), 59);‚Ä®
            const validSeconds = Math.min(Math.max(seconds, 0), 59);‚Ä®
            ‚Ä®
            // Update inputs with valid values‚Ä®
            hoursInput.value = validHours;‚Ä®
            minutesInput.value = validMinutes;‚Ä®
            secondsInput.value = validSeconds;‚Ä®
            ‚Ä®
            timerDuration = (validHours * 3600) + (validMinutes * 60) + validSeconds;‚Ä®
        }‚Ä®
        ‚Ä®
        function updateTimerInputs() {‚Ä®
            const hours = Math.floor(timerDuration / 3600);‚Ä®
            const minutes = Math.floor((timerDuration % 3600) / 60);‚Ä®
            const seconds = timerDuration % 60;‚Ä®
            ‚Ä®
            hoursInput.value = hours;‚Ä®
            minutesInput.value = minutes;‚Ä®
            secondsInput.value = seconds;‚Ä®
        }‚Ä®
        ‚Ä®
        function updateButtonState() {‚Ä®
            if (isRunning) {‚Ä®
                startBtn.classList.add('hidden');‚Ä®
                pauseBtn.classList.remove('hidden');‚Ä®
            } else {‚Ä®
                startBtn.classList.remove('hidden');‚Ä®
                pauseBtn.classList.add('hidden');‚Ä®
            }‚Ä®
        }‚Ä®
        ‚Ä®
        function timerComplete() {‚Ä®
            // Create a new session‚Ä®
            const newSession = {‚Ä®
                date: new Date().toISOString(),‚Ä®
                duration: timerDuration,‚Ä®
                pages: 0,‚Ä®
                startPage: lastPageNumber,‚Ä®
                endPage: lastPageNumber // Will be updated when user enters current page‚Ä®
            };‚Ä®
            ‚Ä®
            // Add to sessions array‚Ä®
            sessions.push(newSession);‚Ä®
            saveToLocalStorage();‚Ä®
            ‚Ä®
            // Show page tracking modal‚Ä®
            showPageTrackingModal();‚Ä®
        }‚Ä®
        ‚Ä®
        function showPageTrackingModal() {‚Ä®
            // Update last page display‚Ä®
            lastPageDisplay.textContent = lastPageNumber;‚Ä®
            ‚Ä®
            // Set focus on current page input and pre-fill with a value higher than last page‚Ä®
            currentPageInput.value = lastPageNumber > 0 ? lastPageNumber + 1 : '';‚Ä®
            ‚Ä®
            // Show modal‚Ä®
            pageTrackingModal.classList.add('active');‚Ä®
            setTimeout(() => {‚Ä®
                currentPageInput.focus();‚Ä®
            }, 300);‚Ä®
        }‚Ä®
        ‚Ä®
        function hidePageTrackingModal() {‚Ä®
            pageTrackingModal.classList.remove('active');‚Ä®
        }‚Ä®
        ‚Ä®
        function showResetConfirmModal() {‚Ä®
            resetConfirmModal.classList.add('active');‚Ä®
        }‚Ä®
        ‚Ä®
        function hideResetConfirmModal() {‚Ä®
            resetConfirmModal.classList.remove('active');‚Ä®
        }‚Ä®
        ‚Ä®
        function savePageProgress() {‚Ä®
            const currentPage = parseInt(currentPageInput.value);‚Ä®
            ‚Ä®
            if (!currentPage || isNaN(currentPage) || currentPage <= 0) {‚Ä®
                showNotification('Invalid Page Number', 'Please enter a valid page number.');‚Ä®
                return;‚Ä®
            }‚Ä®
            ‚Ä®
            if (currentPage <= lastPageNumber) {‚Ä®
                showNotification('Page Number Error', 'Current page should be greater than your previous page.');‚Ä®
                return;‚Ä®
            }‚Ä®
            ‚Ä®
            // Calculate pages read‚Ä®
            const pagesRead = currentPage - lastPageNumber;‚Ä®
            ‚Ä®
            // Update the latest session‚Ä®
            if (sessions.length > 0) {‚Ä®
                const latestSession = sessions[sessions.length - 1];‚Ä®
                latestSession.pages = pagesRead;‚Ä®
                latestSession.endPage = currentPage;‚Ä®
            }‚Ä®
            ‚Ä®
            // Update total pages and last page number‚Ä®
            totalPages += pagesRead;‚Ä®
            lastPageNumber = currentPage;‚Ä®
            ‚Ä®
            // Update streak‚Ä®
            updateStreak();‚Ä®
            ‚Ä®
            // Save to localStorage‚Ä®
            saveToLocalStorage();‚Ä®
            ‚Ä®
            // Update displays‚Ä®
            renderSessions();‚Ä®
            updateDisplays();‚Ä®
            ‚Ä®
            // Hide modal‚Ä®
            hidePageTrackingModal();‚Ä®
            ‚Ä®
            // Show confirmation‚Ä®
            showNotification('Progress Saved!', `You read ${pagesRead} pages during this session. Great job!`);‚Ä®
        }‚Ä®
        ‚Ä®
        function skipPageTracking() {‚Ä®
            hidePageTrackingModal();‚Ä®
            showNotification('Session Recorded', 'Reading session recorded without page tracking.');‚Ä®
            renderSessions();‚Ä®
            updateDisplays();‚Ä®
        }‚Ä®
        ‚Ä®
        function resetAllStats() {‚Ä®
            // Reset all data‚Ä®
            sessions = [];‚Ä®
            streak = {‚Ä®
                current: 0,‚Ä®
                longest: 0,‚Ä®
                lastDate: null‚Ä®
            };‚Ä®
            totalPages = 0;‚Ä®
            lastPageNumber = 0;‚Ä®
            ‚Ä®
            // Save to localStorage‚Ä®
            saveToLocalStorage();‚Ä®
            ‚Ä®
            // Update displays‚Ä®
            renderSessions();‚Ä®
            updateDisplays();‚Ä®
            ‚Ä®
            // Hide modal‚Ä®
            hideResetConfirmModal();‚Ä®
            ‚Ä®
            // Show confirmation‚Ä®
            showNotification('Stats Reset', 'All reading stats have been reset.');‚Ä®
        }‚Ä®
        ‚Ä®
        function showNotification(title, message) {‚Ä®
            if ('Notification' in window && Notification.permission === 'granted') {‚Ä®
                new Notification(title, { body: message });‚Ä®
            } else if ('Notification' in window && Notification.permission !== 'denied') {‚Ä®
                Notification.requestPermission().then(permission => {‚Ä®
                    if (permission === 'granted') {‚Ä®
                        new Notification(title, { body: message });‚Ä®
                    }‚Ä®
                });‚Ä®
            }‚Ä®
            ‚Ä®
            // Also show an in-app notification‚Ä®
            const notification = document.createElement('div');‚Ä®
            notification.className = 'fixed bottom-4 right-4 bg-white rounded-lg shadow-lg p-4 max-w-xs z-50 fade-in';‚Ä®
            notification.innerHTML = `‚Ä®
                <h3 class="font-semibold text-gray-800">${title}</h3>‚Ä®
                <p class="text-gray-600 text-sm">${message}</p>‚Ä®
            `;‚Ä®
            document.body.appendChild(notification);‚Ä®
            ‚Ä®
            setTimeout(() => {‚Ä®
                notification.classList.add('opacity-0', 'transition-opacity', 'duration-500');‚Ä®
                setTimeout(() => notification.remove(), 500);‚Ä®
            }, 5000);‚Ä®
        }‚Ä®
        ‚Ä®
        // Session and streak functions‚Ä®
        function addPages(pages) {‚Ä®
            if (!pages || isNaN(pages) || pages <= 0) return;‚Ä®
            ‚Ä®
            // Manual page entry‚Ä®
            const currentPage = lastPageNumber + parseInt(pages);‚Ä®
            ‚Ä®
            // Create a new session for manual entry‚Ä®
            const session = {‚Ä®
                date: new Date().toISOString(),‚Ä®
                duration: 0, // Manual entry‚Ä®
                pages: parseInt(pages),‚Ä®
                startPage: lastPageNumber,‚Ä®
                endPage: currentPage‚Ä®
            };‚Ä®
            ‚Ä®
            sessions.push(session);‚Ä®
            totalPages += parseInt(pages);‚Ä®
            lastPageNumber = currentPage;‚Ä®
            ‚Ä®
            updateStreak();‚Ä®
            saveToLocalStorage();‚Ä®
            renderSessions();‚Ä®
            updateDisplays();‚Ä®
            ‚Ä®
            // Show confirmation with theme emoji‚Ä®
            showNotification(`${pages} pages added!`, `You're now on page ${currentPage}. Keep up the great reading progress!`);‚Ä®
        }‚Ä®
        ‚Ä®
        function checkStreak() {‚Ä®
            const today = new Date().toISOString().split('T')[0];‚Ä®
            ‚Ä®
            if (streak.lastDate) {‚Ä®
                const lastDate = new Date(streak.lastDate);‚Ä®
                const yesterday = new Date();‚Ä®
                yesterday.setDate(yesterday.getDate() - 1);‚Ä®
                const yesterdayStr = yesterday.toISOString().split('T')[0];‚Ä®
                ‚Ä®
                if (streak.lastDate === today) {‚Ä®
                    // Already logged today, do nothing‚Ä®
                } else if (streak.lastDate === yesterdayStr) {‚Ä®
                    // Logged yesterday, continue streak‚Ä®
                    streak.lastDate = today;‚Ä®
                    streak.current++;‚Ä®
                    if (streak.current > streak.longest) {‚Ä®
                        streak.longest = streak.current;‚Ä®
                    }‚Ä®
                } else {‚Ä®
                    // Streak broken‚Ä®
                    streak.current = 1;‚Ä®
                    streak.lastDate = today;‚Ä®
                }‚Ä®
            } else {‚Ä®
                // First time‚Ä®
                streak.current = 1;‚Ä®
                streak.lastDate = today;‚Ä®
            }‚Ä®
            ‚Ä®
            saveToLocalStorage();‚Ä®
            updateDisplays();‚Ä®
        }‚Ä®
        ‚Ä®
        function updateStreak() {‚Ä®
            const today = new Date().toISOString().split('T')[0];‚Ä®
            ‚Ä®
            if (streak.lastDate !== today) {‚Ä®
                streak.lastDate = today;‚Ä®
                streak.current++;‚Ä®
                ‚Ä®
                if (streak.current > streak.longest) {‚Ä®
                    streak.longest = streak.current;‚Ä®
                }‚Ä®
            }‚Ä®
        }‚Ä®
        ‚Ä®
        function renderSessions() {‚Ä®
            sessionsList.innerHTML = '';‚Ä®
            ‚Ä®
            if (sessions.length === 0) {‚Ä®
                sessionsList.innerHTML = '<div class="text-gray-500 text-sm italic">No sessions yet. Start reading!</div>';‚Ä®
                return;‚Ä®
            }‚Ä®
            ‚Ä®
            // Show most recent 5 sessions‚Ä®
            const recentSessions = [...sessions].reverse().slice(0, 5);‚Ä®
            ‚Ä®
            recentSessions.forEach(session => {‚Ä®
                const date = new Date(session.date);‚Ä®
                const formattedDate = date.toLocaleDateString('en-US', { ‚Ä®
                    month: 'short', ‚Ä®
                    day: 'numeric',‚Ä®
                    hour: '2-digit',‚Ä®
                    minute: '2-digit'‚Ä®
                });‚Ä®
                ‚Ä®
                const hours = Math.floor(session.duration / 3600);‚Ä®
                const minutes = Math.floor((session.duration % 3600) / 60);‚Ä®
                let timeText = '';‚Ä®
                ‚Ä®
                if (hours > 0) {‚Ä®
                    timeText += `${hours}h `;‚Ä®
                }‚Ä®
                if (minutes > 0 || hours === 0) {‚Ä®
                    timeText += `${minutes}m`;‚Ä®
                }‚Ä®
                ‚Ä®
                const sessionEl = document.createElement('div');‚Ä®
                sessionEl.className = 'flex justify-between items-center text-sm';‚Ä®
                sessionEl.innerHTML = `‚Ä®
                    <div class="text-gray-700">${formattedDate}</div>‚Ä®
                    <div class="flex items-center">‚Ä®
                        ${session.duration > 0 ? `<span class="text-purple-600 mr-3">${timeText}</span>` : ''}‚Ä®
                        <span class="text-blue-600">${session.pages} pages</span>‚Ä®
                    </div>‚Ä®
                `;‚Ä®
                sessionsList.appendChild(sessionEl);‚Ä®
            });‚Ä®
        }‚Ä®
        ‚Ä®
        function updateDisplays() {‚Ä®
            streakCount.textContent = streak.current;‚Ä®
            totalPagesDisplay.textContent = totalPages;‚Ä®
            longestStreakDisplay.textContent = `${streak.longest} days`;‚Ä®
            totalSessionsDisplay.textContent = sessions.length;‚Ä®
            ‚Ä®
            // Calculate total time‚Ä®
            let totalSeconds = sessions.reduce((total, session) => total + session.duration, 0);‚Ä®
            let totalHours = Math.floor(totalSeconds / 3600);‚Ä®
            let totalMinutes = Math.floor((totalSeconds % 3600) / 60);‚Ä®
            ‚Ä®
            if (totalHours > 0) {‚Ä®
                totalTimeDisplay.textContent = `${totalHours}h ${totalMinutes}m`;‚Ä®
            } else {‚Ä®
                totalTimeDisplay.textContent = `${totalMinutes}m`;‚Ä®
            }‚Ä®
            ‚Ä®
            // Calculate average pages per session‚Ä®
            const totalSessionPages = sessions.reduce((total, session) => total + session.pages, 0);‚Ä®
            const avgPages = sessions.length > 0 ? Math.round(totalSessionPages / sessions.length) : 0;‚Ä®
            avgPagesDisplay.textContent = avgPages;‚Ä®
        }‚Ä®
        ‚Ä®
        function saveToLocalStorage() {‚Ä®
            localStorage.setItem('readingSessions', JSON.stringify(sessions));‚Ä®
            localStorage.setItem('readingStreak', JSON.stringify(streak));‚Ä®
            localStorage.setItem('totalPages', JSON.stringify(totalPages));‚Ä®
            localStorage.setItem('lastPageNumber', JSON.stringify(lastPageNumber));‚Ä®
            localStorage.setItem('readingTheme', currentTheme);‚Ä®
        }‚Ä®
        ‚Ä®
        function applyTheme(theme) {‚Ä®
            if (!themes[theme]) return;‚Ä®
            ‚Ä®
            const appBody = document.getElementById('app-body');‚Ä®
            const mainCard = document.getElementById('main-card');‚Ä®
            const statsCard = document.getElementById('stats-card');‚Ä®
            const startButton = document.getElementById('start-btn');‚Ä®
            const pauseButton = document.getElementById('pause-btn');‚Ä®
            const progressBarEl = document.getElementById('progress-bar');‚Ä®
            ‚Ä®
            // Apply theme colors‚Ä®
            appBody.style.background = themes[theme].background;‚Ä®
            mainCard.style.backgroundColor = themes[theme].cardBg;‚Ä®
            statsCard.style.backgroundColor = themes[theme].cardBg;‚Ä®
            startButton.style.background = themes[theme].primaryButton;‚Ä®
            pauseButton.style.background = themes[theme].secondaryButton;‚Ä®
            progressBarEl.style.background = themes[theme].progressBar;‚Ä®
            ‚Ä®
            // Update theme presets‚Ä®
            document.querySelectorAll('.timer-preset').forEach(preset => {‚Ä®
                preset.className = `timer-preset px-3 py-1 text-sm rounded-full bg-opacity-70`;‚Ä®
                ‚Ä®
                if (theme === 'spring') {‚Ä®
                    preset.classList.add('bg-green-100', 'text-green-800');‚Ä®
                } else if (theme === 'lavender') {‚Ä®
                    preset.classList.add('bg-purple-100', 'text-purple-800');‚Ä®
                } else if (theme === 'sunset') {‚Ä®
                    preset.classList.add('bg-red-100', 'text-red-800');‚Ä®
                } else if (theme === 'ocean') {‚Ä®
                    preset.classList.add('bg-blue-100', 'text-blue-800');‚Ä®
                }‚Ä®
            });‚Ä®
            ‚Ä®
            // Update add pages button‚Ä®
            addPagesBtn.style.background = themes[theme].primaryButton;‚Ä®
            savePagesBtn.style.background = themes[theme].primaryButton;‚Ä®
            ‚Ä®
            currentTheme = theme;‚Ä®
            saveToLocalStorage();‚Ä®
        }‚Ä®
        ‚Ä®
        // Event listeners‚Ä®
        startBtn.addEventListener('click', startTimer);‚Ä®
        pauseBtn.addEventListener('click', pauseTimer);‚Ä®
        resetBtn.addEventListener('click', resetTimer);‚Ä®
        ‚Ä®
        addPagesBtn.addEventListener('click', () => {‚Ä®
            const pages = parseInt(pageInput.value);‚Ä®
            addPages(pages);‚Ä®
            pageInput.value = '';‚Ä®
        });‚Ä®
        ‚Ä®
        pageInput.addEventListener('keypress', (e) => {‚Ä®
            if (e.key === 'Enter') {‚Ä®
                const pages = parseInt(pageInput.value);‚Ä®
                addPages(pages);‚Ä®
                pageInput.value = '';‚Ä®
            }‚Ä®
        });‚Ä®
        ‚Ä®
        // Timer input event listeners‚Ä®
        hoursInput.addEventListener('change', () => {‚Ä®
            const hours = parseInt(hoursInput.value) || 0;‚Ä®
            hoursInput.value = Math.min(Math.max(hours, 0), 24);‚Ä®
            updateTimerDuration();‚Ä®
            timeRemaining = timerDuration;‚Ä®
            updateTimer();‚Ä®
        });‚Ä®
        ‚Ä®
        minutesInput.addEventListener('change', () => {‚Ä®
            const minutes = parseInt(minutesInput.value) || 0;‚Ä®
            minutesInput.value = Math.min(Math.max(minutes, 0), 59);‚Ä®
            updateTimerDuration();‚Ä®
            timeRemaining = timerDuration;‚Ä®
            updateTimer();‚Ä®
        });‚Ä®
        ‚Ä®
        secondsInput.addEventListener('change', () => {‚Ä®
            const seconds = parseInt(secondsInput.value) || 0;‚Ä®
            secondsInput.value = Math.min(Math.max(seconds, 0), 59);‚Ä®
            updateTimerDuration();‚Ä®
            timeRemaining = timerDuration;‚Ä®
            updateTimer();‚Ä®
        });‚Ä®
        ‚Ä®
        // Timer buttons (+ and -)‚Ä®
        timerButtons.forEach(btn => {‚Ä®
            btn.addEventListener('click', () => {‚Ä®
                const action = btn.dataset.action;‚Ä®
                const unit = btn.dataset.unit;‚Ä®
                const input = document.getElementById(`${unit}-input`);‚Ä®
                let value = parseInt(input.value) || 0;‚Ä®
                ‚Ä®
                if (action === 'increase') {‚Ä®
                    if (unit === 'hours') {‚Ä®
                        value = Math.min(value + 1, 24);‚Ä®
                    } else {‚Ä®
                        value = Math.min(value + 1, 59);‚Ä®
                    }‚Ä®
                } else {‚Ä®
                    value = Math.max(value - 1, 0);‚Ä®
                }‚Ä®
                ‚Ä®
                input.value = value;‚Ä®
                updateTimerDuration();‚Ä®
                timeRemaining = timerDuration;‚Ä®
                updateTimer();‚Ä®
            });‚Ä®
        });‚Ä®
        ‚Ä®
        // Theme selectors‚Ä®
        themeSelectors.forEach(selector => {‚Ä®
            selector.addEventListener('click', () => {‚Ä®
                const theme = selector.dataset.theme;‚Ä®
                ‚Ä®
                // Update active state‚Ä®
                themeSelectors.forEach(s => s.classList.remove('active'));‚Ä®
                selector.classList.add('active');‚Ä®
                ‚Ä®
                applyTheme(theme);‚Ä®
            });‚Ä®
        });‚Ä®
        ‚Ä®
        // Timer presets‚Ä®
        timerPresets.forEach(preset => {‚Ä®
            preset.addEventListener('click', () => {‚Ä®
                const hours = parseInt(preset.dataset.hours) || 0;‚Ä®
                const minutes = parseInt(preset.dataset.minutes) || 0;‚Ä®
                const seconds = parseInt(preset.dataset.seconds) || 0;‚Ä®
                ‚Ä®
                hoursInput.value = hours;‚Ä®
                minutesInput.value = minutes;‚Ä®
                secondsInput.value = seconds;‚Ä®
                ‚Ä®
                updateTimerDuration();‚Ä®
                timeRemaining = timerDuration;‚Ä®
                updateTimer();‚Ä®
                ‚Ä®
                // Show confirmation‚Ä®
                let timeText = '';‚Ä®
                if (hours > 0) timeText += `${hours}h `;‚Ä®
                if (minutes > 0 || (hours === 0 && seconds === 0)) timeText += `${minutes}m `;‚Ä®
                if (seconds > 0) timeText += `${seconds}s`;‚Ä®
                ‚Ä®
                showNotification(`Timer set: ${timeText.trim()}`, 'Ready to start your reading sprint!');‚Ä®
            });‚Ä®
        });‚Ä®
        ‚Ä®
        // Page tracking modal buttons‚Ä®
        savePagesBtn.addEventListener('click', savePageProgress);‚Ä®
        skipTrackingBtn.addEventListener('click', skipPageTracking);‚Ä®
        ‚Ä®
        // Reset stats button‚Ä®
        resetStatsBtn.addEventListener('click', showResetConfirmModal);‚Ä®
        cancelResetBtn.addEventListener('click', hideResetConfirmModal);‚Ä®
        confirmResetBtn.addEventListener('click', resetAllStats);‚Ä®
        ‚Ä®
        // Current page input validation‚Ä®
        currentPageInput.addEventListener('keypress', (e) => {‚Ä®
            if (e.key === 'Enter') {‚Ä®
                savePageProgress();‚Ä®
            }‚Ä®
        });‚Ä®
        ‚Ä®
        // Initialize timer display‚Ä®
        updateTimer();‚Ä®
    });‚Ä®
</script> 
</body>
</html>
